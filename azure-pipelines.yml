trigger:
- main

<<<<<<< HEAD
variables:
- group: ClubVerseSecrets

=======
>>>>>>> 1858c3d6632ee2fc049176a5997340188e12c1c0
pool:
  vmImage: 'ubuntu-latest'

steps:
- task: NodeTool@0
  inputs:
    versionSpec: '20.x'
  displayName: 'Install Node.js'

- script: |
<<<<<<< HEAD
=======
    echo "Gemini API Key is: $(GEMINI_API_KEY)"
  displayName: 'Show Gemini API Key (for demo - remove in real use)'

- script: |
>>>>>>> 1858c3d6632ee2fc049176a5997340188e12c1c0
    cd client
    npm install
    npm run build
  displayName: 'Build client'

- script: |
    cd server
    npm install
<<<<<<< HEAD
    # node server.js # (Uncomment to run server in CI)
  displayName: 'Install server dependencies'
  env:
    GEMINI_API_KEY: $(GEMINI_API_KEY)

- script: |
    echo "Gemini API Key is: $(GEMINI_API_KEY)"
  displayName: 'Show Gemini API Key (for demo - remove in real use)'

- script: |
    cd terraform
    terraform init
    terraform plan
  displayName: 'Terraform plan (demo)'
=======
    echo "No tests configured"
  displayName: 'Install and (optionally) test server'

- script: |
    docker build -t clubverse-client ./client
    docker build -t clubverse-server ./server
  displayName: 'Build Docker images (client and server)'
>>>>>>> 1858c3d6632ee2fc049176a5997340188e12c1c0
